const axios = require('axios');
const cheerio = require('cheerio');
const fs = require('fs');

const pages = [
	{ title: '2006 Jan', url: 'https://www.bigbangri.com/2006jan.html' },
	{ title: '2006 Feb', url: 'https://www.bigbangri.com/2006feb.html' },
	{ title: '2006 Mar', url: 'https://www.bigbangri.com/2006mar.html' },
	{ title: '2006 Apr', url: 'https://www.bigbangri.com/2006apr.html' },
	{ title: '2006 May', url: 'https://www.bigbangri.com/2006may.html' },
	{ title: '2006 Jun', url: 'https://www.bigbangri.com/2006june.html' },
	{ title: '2006 Jul', url: 'https://www.bigbangri.com/2006july.html' },
	{ title: '2006 Aug', url: 'https://www.bigbangri.com/2006aug.html' },
	{ title: '2006 Sep', url: 'https://www.bigbangri.com/2006sept.html' },
	{ title: '2006 Oct', url: 'https://www.bigbangri.com/2006oct.html' },
	{ title: '2006 Nov', url: 'https://www.bigbangri.com/2006nov.html' },
	{ title: '2006 Dec', url: 'https://www.bigbangri.com/2006dec.html' },

	{ title: '2007 Jan', url: 'https://www.bigbangri.com/2007jan.html' },
	{ title: '2007 Feb', url: 'https://www.bigbangri.com/2007feb.html' },
	{ title: '2007 Mar', url: 'https://www.bigbangri.com/2007mar.html' },
	{ title: '2007 Apr', url: 'https://www.bigbangri.com/2007apr.html' },
	{ title: '2007 May', url: 'https://www.bigbangri.com/2007may.html' },
	{ title: '2007 Jun', url: 'https://www.bigbangri.com/2007junejuly.html' },
	{ title: '2007 Aug', url: 'https://www.bigbangri.com/2007aug.html' },
	{ title: '2007 Sep', url: 'https://www.bigbangri.com/2007sept.html' },
	{ title: '2007 Oct', url: 'https://www.bigbangri.com/2007oct.html' },
	{ title: '2007 Nov', url: 'https://www.bigbangri.com/2007nov.html' },
	{ title: '2007 Dec', url: 'https://www.bigbangri.com/2007dec.html' },

	{ title: '2008 Jan', url: 'https://www.bigbangri.com/2008jan.html' },
	{ title: '2008 Feb', url: 'https://www.bigbangri.com/2008feb.html' },
	{ title: '2008 Mar', url: 'https://www.bigbangri.com/2008mar.html' },
	{ title: '2008 Apr', url: 'https://www.bigbangri.com/2008apr.html' },
	{ title: '2008 May', url: 'https://www.bigbangri.com/2008may.html' },
	{ title: '2008 Jun', url: 'https://www.bigbangri.com/2008june.html' },
	{ title: '2008 Jul', url: 'https://www.bigbangri.com/2008july.html' },
	{ title: '2008 Aug', url: 'https://www.bigbangri.com/2008aug.html' },
	{ title: '2008 Sep', url: 'https://www.bigbangri.com/2008sept.html' },
	{ title: '2008 Oct', url: 'https://www.bigbangri.com/2008oct.html' },
	{ title: '2008 Nov', url: 'https://www.bigbangri.com/2008nov.html' },
	{ title: '2008 Dec', url: 'https://www.bigbangri.com/2008dec.html' },

	{ title: '2009 Jan', url: 'https://www.bigbangri.com/2009jan.html' },
	{ title: '2009 Feb', url: 'https://www.bigbangri.com/2009feb.html' },
	{ title: '2009 Mar', url: 'https://www.bigbangri.com/2009mar.html' },
	{ title: '2009 Apr', url: 'https://www.bigbangri.com/2009apr.html' },
	{ title: '2009 May', url: 'https://www.bigbangri.com/2009may.html' },
	{ title: '2009 Jun', url: 'https://www.bigbangri.com/2009june.html' },
	{ title: '2009 Jul', url: 'https://www.bigbangri.com/2009july.html' },
	{ title: '2009 Aug', url: 'https://www.bigbangri.com/2009aug.html' },
	{ title: '2009 Sep', url: 'https://www.bigbangri.com/2009sept.html' },
	{ title: '2009 Oct', url: 'https://www.bigbangri.com/2009oct.html' },
	{ title: '2009 Nov', url: 'https://www.bigbangri.com/2009nov.html' },
	{ title: '2009 Dec', url: 'https://www.bigbangri.com/2009dec.html' },

	{ title: '2010 Jan', url: 'https://www.bigbangri.com/2010jan.html' },
	{ title: '2010 Feb', url: 'https://www.bigbangri.com/2010feb.html' },
	{ title: '2010 Mar', url: 'https://www.bigbangri.com/2010mar.html' },
	{ title: '2010 Apr', url: 'https://www.bigbangri.com/2010apr.html' },
	{ title: '2010 May', url: 'https://www.bigbangri.com/2010may.html' },
	{ title: '2010 Jun', url: 'https://www.bigbangri.com/2010june.html' },
	{ title: '2010 Jul', url: 'https://www.bigbangri.com/2010july.html' },
	{ title: '2010 Aug', url: 'https://www.bigbangri.com/2010aug.html' },
	{ title: '2010 Sep', url: 'https://www.bigbangri.com/2010sept.html' },
	{ title: '2010 Oct', url: 'https://www.bigbangri.com/2010oct.html' },
	{ title: '2010 Nov', url: 'https://www.bigbangri.com/2010nov.html' },
	{ title: '2010 Dec', url: 'https://www.bigbangri.com/2010dec.html' },

	{ title: '2011 Jan', url: 'https://www.bigbangri.com/2011jan.html' },
	{ title: '2011 Feb', url: 'https://www.bigbangri.com/2011feb.html' },
	{ title: '2011 Mar', url: 'https://www.bigbangri.com/2011mar.html' },
	{ title: '2011 Apr', url: 'https://www.bigbangri.com/2011apr.html' },
	{ title: '2011 May', url: 'https://www.bigbangri.com/2011may.html' },
	{ title: '2011 Jun', url: 'https://www.bigbangri.com/2011june.html' },
	{ title: '2011 Jul', url: 'https://www.bigbangri.com/2011july.html' },
	{ title: '2011 Aug', url: 'https://www.bigbangri.com/2011aug.html' },
	{ title: '2011 Sep', url: 'https://www.bigbangri.com/2011sept.html' },
	{ title: '2011 Oct', url: 'https://www.bigbangri.com/2011oct.html' },
	{ title: '2011 Nov', url: 'https://www.bigbangri.com/2011nov.html' },
	{ title: '2011 Dec', url: 'https://www.bigbangri.com/2011dec.html' },

	{ title: '2012 Jan', url: 'https://www.bigbangri.com/2012jan.html' },
	{ title: '2012 Feb', url: 'https://www.bigbangri.com/2012feb.html' },
	{ title: '2012 Mar', url: 'https://www.bigbangri.com/2012mar.html' },
	{ title: '2012 Apr', url: 'https://www.bigbangri.com/2012apr.html' },
	{ title: '2012 May', url: 'https://www.bigbangri.com/2012may.html' },
	{ title: '2012 Jun', url: 'https://www.bigbangri.com/2012june.html' },
	{ title: '2012 Jul', url: 'https://www.bigbangri.com/2012july.html' },
	{ title: '2012 Aug', url: 'https://www.bigbangri.com/2012aug.html' },
	{ title: '2012 Sep', url: 'https://www.bigbangri.com/2012sept.html' },
	{ title: '2012 Oct', url: 'https://www.bigbangri.com/2012oct.html' },
	{ title: '2012 Nov', url: 'https://www.bigbangri.com/2012nov.html' },
	{ title: '2012 Dec', url: 'https://www.bigbangri.com/2012dec.html' },

	{ title: '2013 Jan', url: 'https://www.bigbangri.com/2013jan.html' },
	{ title: '2013 Feb', url: 'https://www.bigbangri.com/2013feb.html' },
	{ title: '2013 Mar', url: 'https://www.bigbangri.com/2013mar.html' },
	{ title: '2013 Apr', url: 'https://www.bigbangri.com/2013apr.html' },
	{ title: '2013 May', url: 'https://www.bigbangri.com/2013may.html' },
	{ title: '2013 Jun', url: 'https://www.bigbangri.com/2013june.html' },
	{ title: '2013 Jul', url: 'https://www.bigbangri.com/2013july.html' },
	{ title: '2013 Aug', url: 'https://www.bigbangri.com/2013aug.html' },
	{ title: '2013 Sep', url: 'https://www.bigbangri.com/2013sept.html' },
	{ title: '2013 Oct', url: 'https://www.bigbangri.com/2013oct.html' },
	{ title: '2013 Nov', url: 'https://www.bigbangri.com/2013nov.html' },
	{ title: '2013 Dec', url: 'https://www.bigbangri.com/2013dec.html' },

	{ title: '2014 Jan', url: 'https://www.bigbangri.com/2014jan.html' },
	{ title: '2014 Feb', url: 'https://www.bigbangri.com/2014feb.html' },
	{ title: '2014 Mar', url: 'https://www.bigbangri.com/2014mar.html' },
	{ title: '2014 Apr', url: 'https://www.bigbangri.com/2014apr.html' },
	{ title: '2014 May', url: 'https://www.bigbangri.com/2014may.html' },
	{ title: '2014 Jun', url: 'https://www.bigbangri.com/2014june.html' },
	{ title: '2014 Jul', url: 'https://www.bigbangri.com/2014july.html' },
	{ title: '2014 Aug', url: 'https://www.bigbangri.com/2014aug.html' },
	{ title: '2014 Sep', url: 'https://www.bigbangri.com/2014sept.html' },
	{ title: '2014 Oct', url: 'https://www.bigbangri.com/2014oct.html' },
	{ title: '2014 Nov', url: 'https://www.bigbangri.com/2014nov.html' },
	{ title: '2014 Dec', url: 'https://www.bigbangri.com/2014dec.html' },

	{ title: '2015 Jan', url: 'https://www.bigbangri.com/2015jan.html' },
	{ title: '2015 Feb', url: 'https://www.bigbangri.com/2015feb.html' },
	{ title: '2015 Mar', url: 'https://www.bigbangri.com/2015mar.html' },
	{ title: '2015 Apr', url: 'https://www.bigbangri.com/2015apr.html' },
	{ title: '2015 May', url: 'https://www.bigbangri.com/2015may.html' },
	{ title: '2015 Jun', url: 'https://www.bigbangri.com/2015june.html' },
	{ title: '2015 Jul', url: 'https://www.bigbangri.com/2015july.html' },
	{ title: '2015 Aug', url: 'https://www.bigbangri.com/2015aug.html' },
	{ title: '2015 Sep', url: 'https://www.bigbangri.com/2015sept.html' },
	{ title: '2015 Oct', url: 'https://www.bigbangri.com/2015oct.html' },
	{ title: '2015 Nov', url: 'https://www.bigbangri.com/2015nov.html' },
	{ title: '2015 Dec', url: 'https://www.bigbangri.com/2015dec.html' },

	{ title: '2016 Jan', url: 'https://www.bigbangri.com/2016jan.html' },
	{ title: '2016 Feb', url: 'https://www.bigbangri.com/2016feb.html' },
	{ title: '2016 Mar', url: 'https://www.bigbangri.com/2016mar.html' },
	{ title: '2016 Apr', url: 'https://www.bigbangri.com/2016apr.html' },
	{ title: '2016 May', url: 'https://www.bigbangri.com/2016may.html' },
	{ title: '2016 Jun', url: 'https://www.bigbangri.com/2016june.html' },
	{ title: '2016 Jul', url: 'https://www.bigbangri.com/2016july.html' },
	{ title: '2016 Aug', url: 'https://www.bigbangri.com/2016aug.html' },
	{ title: '2016 Sep', url: 'https://www.bigbangri.com/2016sept.html' },
	{ title: '2016 Oct', url: 'https://www.bigbangri.com/2016oct.html' },
	{ title: '2016 Nov', url: 'https://www.bigbangri.com/2016nov.html' },
	{ title: '2016 Dec', url: 'https://www.bigbangri.com/2016dec.html' },

	{ title: '2017 Jan', url: 'https://www.bigbangri.com/2017jan.html' },
	{ title: '2017 Feb', url: 'https://www.bigbangri.com/2017feb.html' },
	{ title: '2017 Mar', url: 'https://www.bigbangri.com/2017mar.html' },
	{ title: '2017 Apr', url: 'https://www.bigbangri.com/2017apr.html' },
	{ title: '2017 May', url: 'https://www.bigbangri.com/2017may.html' },
	{ title: '2017 Jun', url: 'https://www.bigbangri.com/2017june.html' },
	{ title: '2017 Jul', url: 'https://www.bigbangri.com/2017july.html' },
	{ title: '2017 Aug', url: 'https://www.bigbangri.com/2017aug.html' },
	{ title: '2017 Sep', url: 'https://www.bigbangri.com/2017sept.html' },
	{ title: '2017 Oct', url: 'https://www.bigbangri.com/2017oct.html' },
	{ title: '2017 Nov', url: 'https://www.bigbangri.com/2017nov.html' },
	{ title: '2017 Dec', url: 'https://www.bigbangri.com/2017dec.html' },

	{ title: '2018 Jan', url: 'https://www.bigbangri.com/2018jan.html' },
	{ title: '2018 Feb', url: 'https://www.bigbangri.com/2018feb.html' },
	{ title: '2018 Mar', url: 'https://www.bigbangri.com/2018mar.html' },
	{ title: '2018 Apr', url: 'https://www.bigbangri.com/2018apr.html' },
	{ title: '2018 May', url: 'https://www.bigbangri.com/2018may.html' },
	{ title: '2018 Jun', url: 'https://www.bigbangri.com/2018june.html' },
	{ title: '2018 Jul', url: 'https://www.bigbangri.com/2018july.html' },
	{ title: '2018 Aug', url: 'https://www.bigbangri.com/2018aug.html' },
	{ title: '2018 Sep', url: 'https://www.bigbangri.com/2018sept.html' },
	{ title: '2018 Oct', url: 'https://www.bigbangri.com/2018oct.html' },
	{ title: '2018 Nov', url: 'https://www.bigbangri.com/2018nov.html' },
	{ title: '2018 Dec', url: 'https://www.bigbangri.com/2018dec.html' },

	{ title: '2019 Jan', url: 'https://www.bigbangri.com/2019jan.html' },
	{ title: '2019 Feb', url: 'https://www.bigbangri.com/2019feb.html' },
	{ title: '2019 Mar', url: 'https://www.bigbangri.com/2019mar.html' },
	{ title: '2019 Apr', url: 'https://www.bigbangri.com/2019apr.html' },
	{ title: '2019 May', url: 'https://www.bigbangri.com/2019may.html' },
	{ title: '2019 Jun', url: 'https://www.bigbangri.com/2019june.html' },
	{ title: '2019 Jul', url: 'https://www.bigbangri.com/2019july.html' },
	{ title: '2019 Aug', url: 'https://www.bigbangri.com/2019aug.html' },
	{ title: '2019 Sep', url: 'https://www.bigbangri.com/2019sept.html' },
	{ title: '2019 Oct', url: 'https://www.bigbangri.com/2019oct.html' },
	{ title: '2019 Nov', url: 'https://www.bigbangri.com/2019nov.html' },
	{ title: '2019 Dec', url: 'https://www.bigbangri.com/2019dec.html' },

	{ title: '2020 Jan', url: 'https://www.bigbangri.com/2020jan.html' },
	{ title: '2020 Feb', url: 'https://www.bigbangri.com/2020feb.html' },
	{ title: '2020 Mar', url: 'https://www.bigbangri.com/2020mar.html' },
	{ title: '2020 Apr', url: 'https://www.bigbangri.com/2020apr.html' },
	{ title: '2020 May', url: 'https://www.bigbangri.com/2020may.html' },
	{ title: '2020 Jun', url: 'https://www.bigbangri.com/2020june.html' },
	{ title: '2020 Jul', url: 'https://www.bigbangri.com/2020july.html' },
	{ title: '2020 Aug', url: 'https://www.bigbangri.com/2020aug.html' },
	{ title: '2020 Sep', url: 'https://www.bigbangri.com/2020sept.html' },
	{ title: '2020 Oct', url: 'https://www.bigbangri.com/2020oct.html' },
	{ title: '2020 Nov', url: 'https://www.bigbangri.com/2020nov.html' },
	{ title: '2020 Dec', url: 'https://www.bigbangri.com/2020dec.html' },

	{ title: '2021 Jan', url: 'https://www.bigbangri.com/2021jan.html' },
	{ title: '2021 Feb', url: 'https://www.bigbangri.com/2021feb.html' },
	{ title: '2021 Mar', url: 'https://www.bigbangri.com/2021mar.html' },
	{ title: '2021 Apr', url: 'https://www.bigbangri.com/2021apr.html' },
	{ title: '2021 May', url: 'https://www.bigbangri.com/2021may.html' },
	{ title: '2021 Jun', url: 'https://www.bigbangri.com/2021june.html' },
	{ title: '2021 Jul', url: 'https://www.bigbangri.com/2021july.html' },
	{ title: '2021 Aug', url: 'https://www.bigbangri.com/2021aug.html' },
	{ title: '2021 Sep', url: 'https://www.bigbangri.com/2021sept.html' },
	{ title: '2021 Oct', url: 'https://www.bigbangri.com/2021oct.html' },
	{ title: '2021 Nov', url: 'https://www.bigbangri.com/2021nov.html' },
	{ title: '2021 Dec', url: 'https://www.bigbangri.com/2021dec.html' },

	{ title: '2022 Jan', url: 'https://www.bigbangri.com/2022jan.html' },
	{ title: '2022 Feb', url: 'https://www.bigbangri.com/2022feb.html' },
	{ title: '2022 Mar', url: 'https://www.bigbangri.com/2022mar.html' },
	{ title: '2022 Apr', url: 'https://www.bigbangri.com/2022apr.html' },
	{ title: '2022 May', url: 'https://www.bigbangri.com/2022may.html' },
	{ title: '2022 Jun', url: 'https://www.bigbangri.com/2022june.html' },
	{ title: '2022 Jul', url: 'https://www.bigbangri.com/2022july.html' },
	{ title: '2022 Aug', url: 'https://www.bigbangri.com/2022aug.html' },
	{ title: '2022 Sep', url: 'https://www.bigbangri.com/2022sept.html' },
	{ title: '2022 Oct', url: 'https://www.bigbangri.com/2022oct.html' },
	{ title: '2022 Nov', url: 'https://www.bigbangri.com/2022nov.html' },
	{ title: '2022 Dec', url: 'https://www.bigbangri.com/2022dec.html' },

	{ title: '2023 Jan', url: 'https://www.bigbangri.com/2023jan.html' },
	{ title: '2023 Feb', url: 'https://www.bigbangri.com/2023feb.html' },
	{ title: '2023 Mar', url: 'https://www.bigbangri.com/2023mar.html' },
	{ title: '2023 Apr', url: 'https://www.bigbangri.com/2023apr.html' },
	{ title: '2023 May', url: 'https://www.bigbangri.com/2023may.html' },
	{ title: '2023 Jun', url: 'https://www.bigbangri.com/2023june.html' },
	{ title: '2023 Jul', url: 'https://www.bigbangri.com/2023july.html' },
	{ title: '2023 Aug', url: 'https://www.bigbangri.com/2023aug.html' },
	{ title: '2023 Sep', url: 'https://www.bigbangri.com/2023sept.html' },
	{ title: '2023 Oct', url: 'https://www.bigbangri.com/2023oct.html' },
	{ title: '2023 Nov', url: 'https://www.bigbangri.com/2023nov.html' },
	{ title: '2023 Dec', url: 'https://www.bigbangri.com/2023dec.html' },

	{ title: '2024 Jan', url: 'https://www.bigbangri.com/2024jan.html' },
	{ title: '2024 Feb', url: 'https://www.bigbangri.com/2024feb.html' },
	{ title: '2024 Mar', url: 'https://www.bigbangri.com/2024mar.html' },
	{ title: '2024 Apr', url: 'https://www.bigbangri.com/2024apr.html' },
	{ title: '2024 May', url: 'https://www.bigbangri.com/2024may.html' },
	{ title: '2024 Jun', url: 'https://www.bigbangri.com/2024june.html' },
	{ title: '2024 Jul', url: 'https://www.bigbangri.com/2024july.html' },
	{ title: '2024 Aug', url: 'https://www.bigbangri.com/2024aug.html' },
	{ title: '2024 Sep', url: 'https://www.bigbangri.com/2024sept.html' },
	{ title: '2024 Oct', url: 'https://www.bigbangri.com/2024oct.html' },
	{ title: '2024 Nov', url: 'https://www.bigbangri.com/2024nov.html' },
	{ title: '2024 Dec', url: 'https://www.bigbangri.com/2024dec.html' },

	{ title: '2025 Jan', url: 'https://www.bigbangri.com/2025jan.html' },
	{ title: '2025 Feb', url: 'https://www.bigbangri.com/2025feb.html' },
	{ title: '2025 Mar', url: 'https://www.bigbangri.com/2025mar.html' },
	{ title: '2025 Apr', url: 'https://www.bigbangri.com/2025apr.html' },
	{ title: '2025 May', url: 'https://www.bigbangri.com/2025may.html' },
	{ title: '2025 Jun', url: 'https://www.bigbangri.com/2025june.html' },
	{ title: '2025 Jul', url: 'https://www.bigbangri.com/2025july.html' },
	{ title: '2025 Aug', url: 'https://www.bigbangri.com/2025aug.html' },
	{ title: '2025 Sep', url: 'https://www.bigbangri.com/2025sept.html' },
	{ title: '2025 Oct', url: 'https://www.bigbangri.com/2025oct.html' },
	{ title: '2025 Nov', url: 'https://www.bigbangri.com/2025nov.html' },
	{ title: '2025 Dec', url: 'https://www.bigbangri.com/2025dec.html' }
];


(async () => {
  const out = [];
  for (const p of pages) {
    try {
      const res = await axios.get(p.url);
      const $ = cheerio.load(res.data);

      $('script, style, iframe, noscript, svg').remove();

      let text = $('body').text().replace(/\s+/g, ' ').trim();

      if (text.length > 8000) text = text.slice(0, 8000) + ' ...';

      const relUrl = new URL(p.url).pathname;

      out.push({
        title: p.title,
        url: relUrl,
        text
      });

      console.log('indexed', p.url);
    } catch (err) {
      console.error('failed to index', p.url, err.message);
    }
  }

  fs.writeFileSync('search_index.json', JSON.stringify(out, null, 2), 'utf8');
  console.log('wrote search_index.json with', out.length, 'items');
})();